{"version":3,"file":"querybuilder.js","sources":["../sources/locales/be.js","../sources/locales/en.js","../sources/locales/index.js","../sources/locales/de.js","../sources/locales/es.js","../sources/locales/fr.js","../sources/locales/it.js","../sources/locales/ja.js","../sources/locales/pt.js","../sources/locales/ru.js","../sources/locales/zh.js","../sources/views/querybuilderline.js","../sources/modules/sort.js","../sources/modules/filters.js","../sources/modules/sql.js","../sources/views/querybuilder.js","../sources/views/filter.js"],"sourcesContent":["const locale = {\n\tor: \"або\",\n\tand: \"і\",\n\tdelete_rule: \"Выдаліць правіла\",\n\tadd_rule: \"Дадаць правіла\",\n\tadd_group: \"Дадаць групу\",\n\tless: \"менш\",\n\tless_or_equal: \"менш або роўна\",\n\tgreater: \"больш\",\n\tgreater_or_equal: \"больш або роўна\",\n\tbetween: \"паміж\",\n\tnot_between: \"не паміж\",\n\tbegins_with: \"пачынаецца з\",\n\tnot_begins_with: \"не пачынаецца з\",\n\tcontains: \"змяшчае\",\n\tnot_contains: \"не змяшчае\",\n\tends_with: \"заканчваецца\",\n\tnot_ends_with: \"не сканчаецца\",\n\tis_empty: \"пуста\",\n\tis_not_empty: \"не пуста\",\n\tequal: \"роўныя\",\n\tnot_equal: \"не роўныя\",\n\tis_null: \"роўная нуля\",\n\tis_not_null: \"не роўная нуля\",\n\tdefault_option: \"---\",\n\tcancel: \"адмяніць\",\n\tfilter: \"фільтраваць\",\n\tsort: \"сартаваць\"\n};\n\nexport default locale;","const locale = {\n\tor: \"Or\",\n\tand: \"And\",\n\tdelete_rule: \"Delete rule\",\n\tadd_rule: \"Add rule\",\n\tadd_group: \"Add group\",\n\tless: \"less\",\n\tless_or_equal: \"less or equal\",\n\tgreater: \"greater\",\n\tgreater_or_equal: \"greater or equal\",\n\tbetween: \"between\",\n\tnot_between: \"not between\",\n\tbegins_with: \"begins with\",\n\tnot_begins_with: \"not begins with\",\n\tcontains: \"contains\",\n\tnot_contains: \"not contains\",\n\tends_with: \"ends with\",\n\tnot_ends_with: \"not ends with\",\n\tis_empty: \"is empty\",\n\tis_not_empty: \"is not empty\",\n\tequal: \"equal\",\n\tnot_equal: \"not equal\",\n\tis_null: \"is null\",\n\tis_not_null: \"is not null\",\n\tdefault_option: \"---\",\n\tcancel: \"Cancel\",\n\tfilter: \"Filter\",\n\tsort:\"Sort\",\n\tsortby: \"Sort by\",\n\tasc:\"asc\",\n\tdesc:\"desc\"\n};\n\nexport default locale;","import be from \"./be\";\nimport de from \"./de\";\nimport en from \"./en\";\nimport es from \"./es\";\nimport fr from \"./fr\";\nimport it from \"./it\";\nimport ja from \"./ja\";\nimport pt from \"./pt\";\nimport ru from \"./ru\";\nimport zh from \"./zh\";\n\nfunction setLocale(locale, name){\n\tvar lang = webix.i18n.locales[name];\n\tif (lang)\n\t\tlang.querybuilder = locale;\n}\n\nsetLocale(be, \"be-BY\");\nsetLocale(de, \"de-DE\");\nsetLocale(en, \"en-US\");\nsetLocale(es, \"es-ES\");\nsetLocale(fr, \"fr-FR\");\nsetLocale(it, \"it-IT\");\nsetLocale(ja, \"ja-JP\");\nsetLocale(pt, \"pt-BR\");\nsetLocale(ru, \"ru-RU\");\nsetLocale(zh, \"zh-CN\");\n\nwebix.i18n.querybuilder = en;","/*German (Germany) locale*/\nconst locale = {\n\tor: \"oder\",\n\tand: \"und\",\n\tdelete_rule: \"Regel löschen\",\n\tadd_rule: \"Regel hinzufügen\",\n\tadd_group: \"Gruppe hinzufügen\",\n\tless: \"weniger\",\n\tless_or_equal: \"weniger oder gleich\",\n\tgreater: \"mehr\",\n\tgreater_or_equal: \"größer oder gleich\",\n\tbetween: \"zwischen\",\n\tnot_between: \"nicht zwischen\",\n\tbegins_with: \"beginnt mit\",\n\tnot_begins_with: \"nicht beginnt mit\",\n\tcontains: \"enthält\",\n\tnot_contains: \"nicht enthält\",\n\tends_with: \"endet mit\",\n\tnot_ends_with: \"nicht endet mit\",\n\tis_empty: \"ist leer\",\n\tis_not_empty: \"es ist nicht leer\",\n\tequal: \"gleich\",\n\tnot_equal: \"ungleich\",\n\tis_null: \"ist null\",\n\tis_not_null: \"es ist nicht null\",\n\tdefault_option: \"---\",\n\tcancel: \"Stornieren\",\n\tfilter: \"Filter\",\n\tsort: \"Sortieren\"\n};\n\nexport default locale;","const locale = {\n\tor: \"o\",\n\tand: \"y\",\n\tdelete_rule: \"Borrar regla\",\n\tadd_rule: \"Añadir regla\",\n\tadd_group: \"Añadir grupo\",\n\tless: \"menos\",\n\tless_or_equal: \"menor o igual\",\n\tgreater: \"mayor\",\n\tgreater_or_equal: \"mayor o igual\",\n\tbetween: \"entre\",\n\tnot_between: \"no entre\",\n\tbegins_with: \"comienza con\",\n\tnot_begins_with: \"no comienza con\",\n\tcontains: \"contiene\",\n\tnot_contains: \"not contiene\",\n\tends_with: \"termina con\",\n\tnot_ends_with: \"no termina con\",\n\tis_empty: \"está vacía\",\n\tis_not_empty: \"no está vacía\",\n\tequal: \"igual\",\n\tnot_equal: \"no es igual\",\n\tis_null: \"es nulo\",\n\tis_not_null: \"no es nulo\",\n\tdefault_option: \"---\",\n\tcancel: \"Cancelar\",\n\tfilter: \"Filtrar\",\n\tsort: \"Ordenar\"\n};\n\nexport default locale;","const locale = {\n\tor: \"ou\",\n\tand: \"et\",\n\tdelete_rule: \"Supprimer la règle\",\n\tadd_rule: \"Ajouter une règle\",\n\tadd_group: \"Ajouter un groupe\",\n\tless: \"moins\",\n\tless_or_equal: \"inférieur ou égal\",\n\tgreater: \"plus grand\",\n\tgreater_or_equal: \"supérieur ou égal\",\n\tbetween: \"entre\",\n\tnot_between: \"pas entre\",\n\tbegins_with: \"commence par\",\n\tnot_begins_with: \"ne commence par\",\n\tcontains: \"contient\",\n\tnot_contains: \"ne contient\",\n\tends_with: \"se termine par\",\n\tnot_ends_with: \"pas se termine par\",\n\tis_empty: \"est vide\",\n\tis_not_empty: \"Il n'est pas vide\",\n\tequal: \"égal\",\n\tnot_equal: \"pas égal\",\n\tis_null: \"est nulle\",\n\tis_not_null: \"Il est non nul\",\n\tdefault_option: \"---\",\n\tcancel: \"Annuler\",\n\tfilter: \"Filtre\",\n\tsort: \"Trier\"\n};\n\nexport default locale;","const locale = {\n\tor: \"o\",\n\tand: \"e\",\n\tdelete_rule: \"Elimina la regola\",\n\tadd_rule: \"Aggiungi regola\",\n\tadd_group: \"Aggiungere gruppo\",\n\tless: \"meno\",\n\tless_or_equal: \"minore o uguale\",\n\tgreater: \"maggiore\",\n\tgreater_or_equal: \"maggiore o uguale\",\n\tbetween: \"tra\",\n\tnot_between: \"non tra\",\n\tbegins_with: \"inizia con\",\n\tnot_begins_with: \"non inizia con\",\n\tcontains: \"contiene\",\n\tnot_contains: \"non contiene\",\n\tends_with: \"finisce con\",\n\tnot_ends_with: \"non termina con\",\n\tis_empty: \"è vuoto\",\n\tis_not_empty: \"non è vuota\",\n\tequal: \"uguale\",\n\tnot_equal: \"non uguale\",\n\tis_null: \"è nullo\",\n\tis_not_null: \"non è nullo\",\n\tdefault_option: \"---\",\n\tcancel: \"Annulla\",\n\tfilter: \"Filtro\",\n\tsort: \"Ordinare\"\n};\n\nexport default locale;","const locale = {\n\tor: \"または\",\n\tand: \"そして\",\n\tdelete_rule: \"ルールを削除する\",\n\tadd_rule: \"ルールを追加\",\n\tadd_group: \"グループを追加\",\n\tless: \"レス\",\n\tless_or_equal: \"以下\",\n\tgreater: \"大きいです\",\n\tgreater_or_equal: \"以上\",\n\tbetween: \"間に\",\n\tnot_between: \"いない間\",\n\tbegins_with: \"で始まります\",\n\tnot_begins_with: \"ないで始まります\",\n\tcontains: \"含まれています\",\n\tnot_contains: \"含まれていません\",\n\tends_with: \"で終わります\",\n\tnot_ends_with: \"で終わりではありません\",\n\tis_empty: \"空であります\",\n\tis_not_empty: \"それは空でありません\",\n\tequal: \"等しいです\",\n\tnot_equal: \"等しくありません\",\n\tis_null: \"ブランクである\",\n\tis_not_null: \"ブランクではない\",\n\tdefault_option: \"---\",\n\tcancel: \"キャンセル\",\n\tfilter: \"フィルタ\",\n\tsort: \"ソート\"\n};\n\nexport default locale;","const locale = {\n\tor: \"ou\",\n\tand: \"e\",\n\tdelete_rule: \"Excluir regra\",\n\tadd_rule: \"Adicionar regra\",\n\tadd_group: \"Adicionar grupo\",\n\tless: \"menos\",\n\tless_or_equal: \"menor ou igual\",\n\tgreater: \"maior\",\n\tgreater_or_equal: \"maior ou igual\",\n\tbetween: \"entre\",\n\tnot_between: \"não entre\",\n\tbegins_with: \"começa com\",\n\tnot_begins_with: \"não começa com\",\n\tcontains: \"contém\",\n\tnot_contains: \"não contém\",\n\tends_with: \"termina com\",\n\tnot_ends_with: \"não termina com\",\n\tis_empty: \"está vazia\",\n\tis_not_empty: \"não é vazia\",\n\tequal: \"igual\",\n\tnot_equal: \"não é igual\",\n\tis_null: \"é nulo\",\n\tis_not_null: \"não é nula\",\n\tdefault_option: \"---\",\n\tcancel: \"Cancelar\",\n\tfilter: \"Filtro\",\n\tsort: \"Ordenar\"\n};\n\nexport default locale;","const locale = {\n\tor: \"или\",\n\tand: \"и\",\n\tdelete_rule: \"Удалить правило\",\n\tadd_rule: \"Добавить правило\",\n\tadd_group: \"Добавить группу\",\n\tless: \"меньше\",\n\tless_or_equal: \"меньше или равно\",\n\tgreater: \"больше\",\n\tgreater_or_equal: \"больше или равно\",\n\tbetween: \"между\",\n\tnot_between: \"не между\",\n\tbegins_with: \"начинается с\",\n\tnot_begins_with: \"не начинается с\",\n\tcontains: \"содержит\",\n\tnot_contains: \"не содержит\",\n\tends_with: \"заканчиватся\",\n\tnot_ends_with: \"не заканчиватся\",\n\tis_empty: \"пусто\",\n\tis_not_empty: \"не пусто\",\n\tequal: \"равно\",\n\tnot_equal: \"не равно\",\n\tis_null: \"равно нулю\",\n\tis_not_null: \"не равно нулю\",\n\tdefault_option: \"---\",\n\tcancel: \"Отменить\",\n\tfilter: \"Фильтровать\",\n\tsort: \"Сортировать\"\n};\n\nexport default locale;","const locale = {\n\tor: \"要么\",\n\tand: \"和\",\n\tdelete_rule: \"删除规则\",\n\tadd_rule: \"添加规则\",\n\tadd_group: \"添加组\",\n\tless: \"减\",\n\tless_or_equal: \"少于或等于\",\n\tgreater: \"更大\",\n\tgreater_or_equal: \"大于或等于\",\n\tbetween: \"之间\",\n\tnot_between: \"不在之间\",\n\tbegins_with: \"开始于\",\n\tnot_begins_with: \"不开始\",\n\tcontains: \"包含\",\n\tnot_contains: \"不包含\",\n\tends_with: \"结束\",\n\tnot_ends_with: \"不是以\",\n\tis_empty: \"是空的\",\n\tis_not_empty: \"不是空的\",\n\tequal: \"等于\",\n\tnot_equal: \"不平等\",\n\tis_null: \"为空\",\n\tis_not_null: \"不为空\",\n\tdefault_option: \"---\",\n\tcancel: \"取消\",\n\tfilter: \"过滤\",\n\tsort: \"分类\"\n};\n\nexport default locale;","webix.protoUI({\n\tname: \"querybuilderline\",\n\tdefaults: {\n\t\tpadding: 0, margin: 10, borderless: true\n\t},\n\t$init(config) {\n\t\tconst locale = webix.i18n.querybuilder;\n\n\t\tthis.config.value = {};\n\t\tthis.$view.className += \" webix_qb_line\";\n\t\tconst keyoptions = [\n\t\t\t...config.fields\n\t\t];\n\n\t\tconst elements = [\n\t\t\tthis._selectConfig(config, \"webix_qb_value_select\", \"key\", keyoptions),\n\t\t\tthis._selectConfig(config, \"webix_qb_rule_select\", \"rule\", { body:{ data:[], template:\"#name#\"}}, true),\n\t\t\t{view:\"button\", type:\"htmlbutton\", css:\"webix_qb_close\", width:26, inputWidth:26, name:\"close\",\n\t\t\t\tlabel: `<span class=\"webix_icon wxi-trash\" title=\"${locale.delete_rule}\"></span>`, click:() => {\n\t\t\t\t\tthis._getParentQuery()._deleteRow(this);\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\tif (config.columnMode){\n\t\t\tconfig.css = (config.css || \"\") + \" webix_column_qb\";\n\t\t\tconfig.margin = config.margin || 0;\n\t\t\tconfig.rows = elements;\n\t\t} else {\n\t\t\telements.push({gravity: 0.001});\n\t\t\tconfig.cols = elements;\n\t\t}\n\n\t},\n\t_selectConfig(config, css, name, options, hidden){\n\t\tconst select = {\n\t\t\tview: \"richselect\",\n\t\t\tminWidth:100,\n\t\t\tmaxWidth: config.inputMaxWidth,\n\t\t\tinputPadding: 0,\n\t\t\toptions,\n\t\t\thidden,\n\t\t\tcss,\n\t\t\tname,\n\t\t\ton:{\n\t\t\t\tonChange: () => this._onChange(name)\n\t\t\t}\n\t\t};\n\n\t\treturn select;\n\t},\n\t_inputConfig(config, type, value, field){\n\t\tlet input;\n\t\tif (typeof type === \"string\"){\n\t\t\tinput = {\n\t\t\t\tview:type\n\t\t\t};\n\t\t} else {\n\t\t\tinput = webix.copy(type);\n\t\t}\n\n\t\tinput.name=\"value\";\n\t\tinput.maxWidth=config.inputMaxWidth;\n\t\tinput.value=value;\n\t\tinput.on = {\n\t\t\tonChange: () => this._onChange(\"value\")\n\t\t};\n\n\t\tif (field.validate)\n\t\t\tinput.validate = field.validate;\n\n\n\n\t\tif (type === \"rangeslider\"){\n\t\t\tinput.min = 0;\n\t\t\tinput.max = 100;\n\t\t\tinput.value = [0, 100];\n\t\t\tinput.moveTitle = false;\n\t\t\tinput.title = obj => {\n\t\t\t\tconst v = obj.value;\n\t\t\t\treturn (v[0] === v[1] ? v[0] : v[0] + \" - \" + v[1]);\n\t\t\t};\n\t\t}\n\n\t\treturn input;\n\t},\n\tgetValue() {\n\t\tvar state = this.config.value;\n\t\tif (state.rule && (\n\t\t\tstate.value !== \"\" ||\n\t\t\tstate.rule === \"equal\" ||\n\t\t\tstate.rule === \"not_equal\" ||\n\t\t\t!this.elements.value\n\t\t))\n\t\t\treturn this.config.value;\n\t\treturn null;\n\t},\n\tsetValue(value) {\n\t\tthis.config.value = value;\n\t\tthis._silent = true;\n\n\t\tif (value && value.key){\n\t\t\tthis.elements.key.setValue(value.key);\n\t\t\tif (value.rule){\n\t\t\t\tthis.elements.rule.setValue(value.rule);\n\t\t\t\tif (value.value)\n\t\t\t\t\tthis.elements.value.setValue(value.value);\n\t\t\t}\n\t\t}\n\t\tthis._silent = false;\n\t},\n\t_onChange(key) {\n\t\tvar select = this.elements[key];\n\t\tvar value = this.config.value;\n\n\t\tvalue[key] = select.getValue();\n\t\tthis._adjustVisible(key, value);\n\n\t\tif (!this._silent){\n\t\t\tthis._getTopQuery().callEvent(\"onChange\", [this]);\n\t\t\tthis._getTopQuery().callEvent(\"onKeySelect\", [this]);\n\t\t}\n\t},\n\t_adjustVisible(type, data){\n\t\tconst field = this.elements.key.getList().getItem(data.key);\n\t\tconst rule = this.elements.rule;\n\t\tlet value = this.elements.value;\n\n\t\tif (type === \"key\"){\n\t\t\tthis._updateRuleField(data, field, rule, value);\n\t\t} else if (type === \"rule\"){\n\t\t\tthis._updateValueField(data, field, rule, value);\n\t\t}\n\t},\n\t_fillRules(field, rule){\n\t\tconst filters = this.config.filters;\n\t\tfilters.filter(a => {\n\t\t\treturn a.type[field.type] || a.type[\"any\"];\n\t\t});\n\t\trule.getList().data.importData(filters.data);\n\t},\n\t_updateRuleField(data, field, rule, value){\n\t\tconst oldrule = rule.getValue();\n\t\tconst filter = oldrule ? rule.getList().getItem(oldrule).type : \"\";\n\n\t\tif (!this._silent && !filter[field.type])\n\t\t\tdata.rule = data.value = \"\";\n\n\t\tif (data.key){\n\t\t\trule.show();\n\t\t\tthis._fillRules(field, rule);\n\t\t\trule.setValue(data.rule);\n\n\t\t\tthis._updateValueField(data, field, rule, this.elements.value);\n\t\t} else {\n\t\t\trule.hide();\n\t\t\tif (value)\n\t\t\t\tvalue.hide();\n\t\t}\n\t},\n\t_updateValueField(data, field, rule, value){\n\t\tif (data.rule){\n\t\t\tlet filter = rule.getList().getItem(data.rule);\n\t\t\tlet editor = filter.type[field.type] || filter.type[\"any\"];\n\t\t\t\n\t\t\tif (value && editor === value.name){\n\t\t\t\tvalue.show();\n\t\t\t\tvalue.setValue(data.value);\n\t\t\t} else {\n\t\t\t\tif (!this._silent)\n\t\t\t\t\tdata.value = \"\";\n\t\t\t\tif (value)\n\t\t\t\t\tthis.removeView(value);\n\t\t\t\tif (editor !== \"none\"){\n\t\t\t\t\tthis.addView(this._inputConfig(this.config, editor, data.value, field), 2);\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (!this._silent)\n\t\t\t\tdata.value = \"\";\n\t\t\tif (value)\n\t\t\t\tvalue.hide();\n\t\t}\n\t},\n\t_getParentQuery() {\n\t\treturn this.queryView({ view:\"querybuilder\" }, \"parent\");\n\t},\n\t_getTopQuery(){\n\t\treturn this._getParentQuery()._getTopQuery();\n\t},\n\tgetFilterHelper() {\n\t\tconst data = this.config.value;\n\t\tif (!this.getValue()) return null;\n\n\t\tconst filter = this.elements.rule.getList().getItem(data.rule);\n\t\treturn  obj => filter.fn(obj[data.key], data.value);\n\t}\n},  webix.ui.form, webix.EventSystem);","const sort = {\n\t_init_sorting:function(){\n\t\tconst locale = webix.i18n.querybuilder;\n\n\t\treturn [{\n\t\t\tview:\"multiselect\", $id:\"by\",\n\t\t\tlabel:locale.sortby,\n\t\t\tsuggest: {\n\t\t\t\tbody:{\n\t\t\t\t\tdata: this.config.fields\n\t\t\t\t}\n\t\t\t},\n\t\t\talign: \"right\",\n\t\t\twidth: 300,\n\t\t\tlabelWidth: 57,\n\t\t\ton: {\n\t\t\t\tonChange: () => {\n\t\t\t\t\tthis._callChangeMethod();\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tview:\"richselect\", $id:\"order\",\n\t\t\toptions:[{ id:\"asc\", value:locale.asc}, { id:\"desc\", value:locale.desc}],\n\t\t\tvalue:\"asc\",\n\t\t\twidth: 80,\n\t\t\ton: {\n\t\t\t\tonChange: () => {\n\t\t\t\t\tif(this._getSortingValues().sortBy) {\n\t\t\t\t\t\tthis._callChangeMethod();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, {}];\n\t},\n\t_getSortingValues() {\n\t\tconst els = this.getSortingElements();\n\t\treturn { sortBy: els[0].getValue(), sortAs: els[1].getValue() };\n\t},\n\t_setSortingValues(value) {\n\t\tconst els = this.getSortingElements();\n\n\t\tif (value.fields){\n\t\t\tvar list = els[0].getList();\n\t\t\tlist.clearAll();\n\t\t\tlist.parse(value.fields);\n\t\t}\n\n\t\tels[0].setValue(value.sortBy);\n\t\tels[1].setValue(value.sortAs);\n\t},\n\tgetSortingElements(){\n\t\treturn [this.queryView({$id:\"by\"}), this.queryView({$id:\"order\"})];\n\t},\n\tgetSortingHelper() {\n\t\tconst els = this.getSortingElements();\n\t\tconst by = els[0].getValue();\n\t\tconst sortAs = els[1].getValue();\n\n\t\tif (!by) return null;\n\t\t\n\t\tlet values = by.split(\",\").map(id => {\n\t\t\tvar item = els[0].getList().getItem(id);\n\t\t\tvar type = item.type;\n\t\t\tif (type === \"number\") type = \"int\";\n\n\t\t\treturn { \n\t\t\t\tby: function(obj){ return obj[id]; },\n\t\t\t\tas: webix.DataStore.prototype.sorting.as[type]\n\t\t\t};\n\t\t});\n\t\t\n\t\treturn function(obj1, obj2){\n\t\t\tvar order;\n\t\t\tfor (var i=0; i<values.length; i++){\n\t\t\t\tvar sorter = values[i];\n\t\t\t\tvar a = sorter.by(obj1);\n\t\t\t\tvar b = sorter.by(obj2);\n\t\t\t\torder = sorter.as(a, b);\n\t\t\t\tif (order !== 0) break;\n\t\t\t}\n\n\t\t\treturn order * ((sortAs === \"asc\") ? 1 : -1);\n\t\t};\n\t}\n};\n\nexport default sort;","const text = { \"any\" : \"text\", \"number\" : \"text\", \"date\" : \"datepicker\" };\nconst range = { \"number\" : \"rangeslider\", \"date\" : \"daterangepicker\" };\nconst str = { \"string\" : \"text\" };\n\nfunction filters(){\n\tconst locale = webix.i18n.querybuilder;\n\tconst prepare = (v) => typeof v == \"number\" ? v.toString() : v;\n\n\treturn [\n\t\t{id: \"less\", name:  locale.less, fn: (a, b) => a < b, type: text },\n\t\t{id: \"less_or_equal\", name: locale.less_or_equal, fn: (a, b) => a <= b, type: text  },\n\t\t{id: \"greater\", name: locale.greater, fn: (a, b) => a > b, type: text },\n\t\t{id: \"greater_or_equal\", name: locale.greater_or_equal, fn: (a, b) => a >= b, type: text },\n\t\t{id: \"between\", name: locale.between, fn: (a, b, c) => (!b || a > b) && (!c || a < c), type: range },\n\t\t{id: \"not_between\", name: locale.not_between, fn: (a, b, c) => (!b || a <= b) || (!c || a >= c), type: range },\n\t\t{id: \"begins_with\", name: locale.begins_with, fn: (a, b) => a.lastIndexOf(b, 0) === 0, type: str},\n\t\t{id: \"not_begins_with\", name: locale.not_begins_with, fn: (a, b) => a.lastIndexOf(b, 0) !== 0, type: str},\n\t\t{id: \"contains\", name: locale.contains, fn: (a, b) => a.indexOf(b) !== -1, type: str},\n\t\t{id: \"not_contains\", name: locale.not_contains, fn: (a, b) => a.indexOf(b) === -1, type: str},\n\t\t{id: \"ends_with\", name: locale.ends_with, fn: (a, b) => a.indexOf(b, a.length - b.length) !== -1, type: str},\n\t\t{id: \"not_ends_with\", name: locale.not_ends_with, fn: (a, b) => a.indexOf(b, a.length - b.length) === -1, type: str},\n\t\t{id: \"is_empty\", name: locale.is_empty, fn: (a) => a.length === 0, type: { \"string\": \"none\" }},\n\t\t{id: \"is_not_empty\", name: locale.is_not_empty, fn: (a) => a.length > 0, type: { \"string\": \"none\" }},\n\t\t{id: \"equal\", name: locale.equal, fn: (a, b) => prepare(a) == prepare(b), type: { any : \"text\", \"date\" : \"datepicker\" }},\n\t\t{id: \"not_equal\", name: locale.not_equal, fn: (a, b) =>  prepare(a) != prepare(b), type: { any : \"text\", \"date\" : \"datepicker\" }},\n\t\t{id: \"is_null\", name: locale.is_null, fn: (a) => a === null, type: { \"any\" : \"none\" }},\n\t\t{id: \"is_not_null\", name: locale.is_not_null, fn: (a) => a !== null, type: { \"any\" : \"none\" }}\n\t];\n}\n\nexport default filters;","const sql = {\n\t$init(){\n\t\tthis.config.sqlDateFormat = this.config.sqlDateFormat || webix.Date.dateToStr(\"%Y-%m-%d %H:%i:%s\", false);\n\t},\n\tsqlOperators: {\n\t\tequal:            { op: \"= ?\" },\n\t\tnot_equal:        { op: \"!= ?\" },\n\t\tless:             { op: \"< ?\" },\n\t\tless_or_equal:    { op: \"<= ?\" },\n\t\tgreater:          { op: \"> ?\" },\n\t\tgreater_or_equal: { op: \">= ?\" },\n\t\tbetween:          { op: \"BETWEEN ?\",      sep: \" AND \" },\n\t\tnot_between:      { op: \"NOT BETWEEN ?\",  sep: \" AND \" },\n\t\tbegins_with:      { op: \"LIKE(?)\",        mod: \"{0}%\" },\n\t\tnot_begins_with:  { op: \"NOT LIKE(?)\",    mod: \"{0}%\" },\n\t\tcontains:         { op: \"LIKE(?)\",        mod: \"%{0}%\" },\n\t\tnot_contains:     { op: \"NOT LIKE(?)\",    mod: \"%{0}%\" },\n\t\tends_with:        { op: \"LIKE(?)\",        mod: \"%{0}\" },\n\t\tnot_ends_with:    { op: \"NOT LIKE(?)\",    mod: \"%{0}\" },\n\t\tis_empty:         { op: \"= \\\"\\\"\", no_val: true },\n\t\tis_not_empty:     { op: \"!= \\\"\\\"\", no_val: true },\n\t\tis_null:          { op: \"IS NULL\", no_val: true },\n\t\tis_not_null:      { op: \"IS NOT NULL\", no_val: true }\n\t},\n\ttoSQL(config) {\n\t\tconfig = config || this.getValue();\n\t\t\n\t\tconst values = [];\n\t\tconst code = this._getSqlString(config, values, false);\n\t\tconst sql = this._placeValues(code, values);\n\t\treturn { code, sql, values };\n\t},\n\t_placeValues(code, values){\n\t\tlet index = 0;\n\t\treturn code.replace(/\\?/g, function(){\n\t\t\tconst value = values[index++];\n\t\t\tif (typeof value === \"string\")\n\t\t\t\treturn `\"${value}\"`;\n\t\t\telse\n\t\t\t\treturn value;\n\t\t});\n\t},\n\t_getSqlString(config, values, nested) {\n\t\tif(!config) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tif (config.rules && config.rules.length){\n\t\t\tlet sql = config.rules.map(a => this._getSqlString(a, values, true)).join(\" \"+config.glue.toUpperCase()+\" \");\n\t\t\tif (nested){\n\t\t\t\tsql = `( ${sql} )`;\n\t\t\t}\n\t\t\treturn sql;\n\t\t}\n\t\treturn this._convertValueToSql(config, values);\n\t},\n\t_convertValueToSql(el, values) {\n\t\tconst format = this.config.sqlDateFormat;\n\t\tconst value = el.value;\n\n\t\tvar match = this.sqlOperators[el.rule];\n\t\tif (match){\n\t\t\tlet operator = this.sqlOperators[el.rule];\n\t\t\t\n\t\t\tif(!operator.no_val) {\n\t\t\t\tif(operator.mod) {\n\t\t\t\t\tvalues.push( operator.mod.replace(\"{0}\", `${value}`) );\n\t\t\t\t} else {\n\t\t\t\t\tif(Array.isArray(value)) {\n\t\t\t\t\t\tvalues.push(value[0]);\n\t\t\t\t\t\tvalues.push(value[1]);\n\t\t\t\t\t} else if (value.start || value.end){\n\t\t\t\t\t\tvalues.push(format(value.start));\n\t\t\t\t\t\tvalues.push(format(value.end));\n\t\t\t\t\t} else if(value instanceof Date){\n\t\t\t\t\t\tvalues.push( format(value) );\n\t\t\t\t\t} else\n\t\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet glue = operator.op;\n\t\t\tif (operator.sep)\n\t\t\t\tglue = glue.replace(\"?\", `?${operator.sep}?`);\n\n\t\t\treturn `${el.key} ${glue} `;\n\t\t}\n\n\t\treturn \"\";\n\t}\n};\n\nexport default sql;","import \"./querybuilderline\";\n\nimport sort from \"../modules/sort\";\nimport filters from \"../modules/filters\";\nimport sql from \"../modules/sql\";\n\nconst qb = {\n\tname: \"querybuilder\",\n\tdefaults: {\n\t\ttype: \"space\",\n\t\tborderless: true,\n\t\t\n\t\tfields: [],\n\t\tsorting: false,\n\t\tfiltering: true,\n\t\tglue: \"and\",\n\n\t\tcolumnMode: false,\n\t\tmaxLevel: 999,\n\t\tinputMaxWidth: 210\n\t},\n\t$init(config) {\n\t\tconfig.filters = config.filters || filters();\n\t\tif (config.filters && !config.filters.add)\n\t\t\tconfig.filters = new webix.DataCollection({ data: config.filters });\n\n\t\tthis.$view.className += \" webix_qb_wrap\";\n\t\tthis.$ready.unshift(this._setLayout);\n\t},\n\t_setLayout() {\n\t\tlet levelIndicator = this.config.maxLevel > 1 ? true:false;\n\t\tconst locale = webix.i18n.querybuilder;\n\n\t\tlet cols = [{\n\t\t\t$id:\"buttons\",\n\t\t\tborderless: true,\n\t\t\ttemplate:() => {\n\t\t\t\tconst and = this.config.glue === \"and\";\n\t\t\t\treturn `\n<div class=\"webix_qb_buttons\">\n<button class=\"webix_qb_and${and?\" webix_active\":\"\"}\">${locale.and}</button>\n<button class=\"webix_qb_or ${!and?\" webix_active\":\"\"}\">${locale.or}</button>\n</div>`;\n\t\t\t},\n\t\t\tonClick:{\n\t\t\t\twebix_qb_and: () => this._updateGlue(\"and\"),\n\t\t\t\twebix_qb_or: () => this._updateGlue(\"or\")\n\t\t\t},\n\t\t\tminHeight:35,\n\t\t\twidth: 87,\n\t\t},\n\t\t{\n\t\t\t$id:\"rows\",\n\t\t\trows: [\n\t\t\t\t{\n\t\t\t\t\tborderless: true,\n\t\t\t\t\ttemplate: `\n<div class=\"webix_qb_add\">\n${levelIndicator?`<button class=\"webix_qb_add_group\">+ ${locale.add_group}</button>`:\"\"}\n<button class=\"webix_qb_add_rule\">+ ${locale.add_rule}</button>\n</div>`,\n\t\t\t\t\tonClick: {\n\t\t\t\t\t\twebix_qb_add_rule:() => this._addRule(),\n\t\t\t\t\t\twebix_qb_add_group:() => this._addGroup(true)\n\t\t\t\t\t},\n\t\t\t\t\theight: 22,\n\t\t\t\t\tminWidth: 220\n\t\t\t\t}],\n\t\t\tmargin: 5\n\t\t}];\n\n\t\tif (this.config.filtering === false){\n\t\t\tconst ui = this.config.sorting ? this._init_sorting() : [{ height: 1}];\n\t\t\tthis.cols_setter(ui);\n\t\t} else {\n\t\t\t// fit width in column's mode\n\t\t\tif (this.config.columnMode)\n\t\t\t\tcols[1].rows[0].width = cols[1].rows[0].minWidth;\n\n\t\t\tif (this.config.sorting){\n\t\t\t\tif (this.config.columnMode){\n\t\t\t\t\tthis.rows_setter([ { cols }, { cols:this._init_sorting() } ]);\n\t\t\t\t} else {\n\t\t\t\t\tconst sort = this._init_sorting();\n\t\t\t\t\tsort.pop();\n\t\t\t\t\tcols.push({ rows:[{ cols:sort }, { gravity: 0.000001 }]});\n\t\t\t\t\tthis.cols_setter(cols);\n\t\t\t\t}\n\t\t\t} else\n\t\t\t\tthis.cols_setter(cols);\n\t\t}\n\t},\n\t_updateGlue(mode){\n\t\tthis.config.glue = mode;\n\t\tthis.queryView({$id:\"buttons\"}).refresh();\n\t\tthis._callChangeMethod();\n\t},\n\t_addRow(ui) {\n\t\tlet layout = this.queryView({$id:\"rows\"});\n\t\tlet kids = layout.getChildViews();\n\t\treturn webix.$$(layout.addView(ui, kids.length-1));\n\t},\n\t_deleteRow(el) {\n\t\tlet layout = this.queryView({$id:\"rows\"});\n\t\tlayout.removeView(el);\n\t\tthis._callChangeMethod();\n\n\t\tif (layout.getChildViews().length <= 1) {\n\t\t\tconst parent = this._getParentQuery();\n\t\t\tif (parent){\n\t\t\t\tparent._deleteRow(this.config.id);\n\t\t\t}\n\t\t}\n\t},\n\t_addRule() {\n\t\tconst line = this._addRow({\n\t\t\tview: \"querybuilderline\",\n\n\t\t\tinputMaxWidth: this.config.inputMaxWidth,\n\t\t\tfields: this.config.fields,\n\t\t\tfilters: this.config.filters,\n\n\t\t\tcolumnMode: this.config.columnMode\n\t\t});\n\n\t\treturn line;\n\t},\n\t_addGroup(withRow) {\n\t\tlet newView = this._addRow({\n\t\t\tview: \"querybuilder\",\n\n\t\t\tinputMaxWidth: this.config.inputMaxWidth,\n\t\t\tfields: this.config.fields,\n\t\t\tfilters: this.config.filters,\n\n\t\t\tcolumnMode: this.config.columnMode,\n\t\t\tmaxLevel:this.config.maxLevel-1\n\t\t});\n\n\t\tif (withRow){\n\t\t\tnewView._addRule();\n\t\t}\n\t\treturn newView;\n\t},\n\t_getParentQuery() {\n\t\treturn  this.queryView({ view:this.config.view }, \"parent\");\n\t},\n\t_getTopQuery(){\n\t\tlet parent, now = this;\n\t\twhile((parent = now._getParentQuery())){\n\t\t\tnow = parent;\n\t\t}\n\t\treturn now;\n\t},\n\t_callChangeMethod() {\n\t\tthis._getTopQuery().callEvent(\"onChange\", []);\n\t},\n\t_setRules(rules) {\n\t\tif (rules) {\n\t\t\trules.forEach(el => {\n\t\t\t\tlet rule;\n\t\t\t\tif (!el.glue) {\n\t\t\t\t\trule = this._addRule();\n\t\t\t\t} else {\n\t\t\t\t\trule = this._addGroup();\n\t\t\t\t}\n\t\t\t\twebix.$$(rule).setValue(el);\n\t\t\t});\n\t\t}\n\t},\n\teachLine(cb){\n\t\tvar rows = this.queryView({$id:\"rows\"}).getChildViews();\n\t\tfor (var i=0; i<rows.length; i++) {\n\t\t\tif (rows[i].getFilterHelper)\n\t\t\t\tcb(rows[i]);\n\t\t}\n\t},\n\tvalidate(){\n\t\tvar result = true;\n\t\tthis.eachLine(function(line){\n\t\t\tresult = result && line.validate();\n\t\t});\n\n\t\treturn result;\n\t},\n\tgetValue() {\n\t\tconst rules = [];\n\t\tthis.eachLine(a => {\n\t\t\tconst line = a.getValue();\n\t\t\tif (line)\n\t\t\t\trules.push(line);\n\t\t});\n\n\t\tif(rules.length) {\n\t\t\treturn {glue: this.config.glue, rules};\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\tsetValue(value) {\n\t\tif (value.fields){\n\t\t\tthis.config.fields = value.fields;\n\t\t}\n\n\t\tif (value.query){\n\t\t\tvalue = value.query;\n\t\t}\n\n\t\tif (value.glue){\n\t\t\tthis.config.glue = value.glue;\n\t\t}\n\n\t\tthis.reconstruct();\n\t\tif (value.rules){\n\t\t\tthis._setRules(value.rules);\n\t\t}\n\n\t\tthis.queryView({ $id: \"buttons\" }).refresh();\n\n\t\tif (this.config.sorting){\n\t\t\tthis._setSortingValues(value);\n\t\t}\n\n\t\tthis._callChangeMethod();\n\t},\n\tfocus() {\n\t\tconst line = this.queryView({ view:\"querybuilderline\" });\n\t\tif (line) line.focus();\n\t},\n\n\tgetFilterHelper() {\n\t\tlet childsArr = [];\n\t\tlet glue = this.config.glue;\n\n\t\tthis.eachLine(a => {\n\t\t\tvar sub = a.getFilterHelper();\n\t\t\tif (sub)\n\t\t\t\tchildsArr.push(sub);\n\t\t});\n\n\t\tif(!childsArr.length)\n\t\t\treturn () => true;\n\n\t\treturn obj => {\n\t\t\tlet result;\n\t\t\tif (glue === \"and\") {\n\t\t\t\tresult = true;\n\t\t\t\tchildsArr.forEach(function(item) {\n\t\t\t\t\tif (!item(obj)) {\n\t\t\t\t\t\tresult = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tresult = false;\n\t\t\t\tchildsArr.forEach(function(item) {\n\t\t\t\t\tif (item(obj)) {\n\t\t\t\t\t\tresult = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn result;\n\t\t};\n\t}\n};\n\nwebix.protoUI(qb, sort, sql, webix.ui.layout, webix.EventSystem);","function _buttonCreate(label, click, type) {\n\treturn {\n\t\tview:\"button\",\n\t\tvalue:label,\n\t\talign: \"right\",\n\t\twidth:120,\n\t\ttype,\n\t\tclick\n\t};\n}\n\nwebix.ui.datafilter.queryBuilder = webix.extend({\n\tgetInputNode(node){\n\t\treturn webix.$$(node._comp_id) || null;\n\t},\n\tgetValue(node) {\n\t\tlet master = webix.$$(node._comp_id);\n\t\treturn master.getValue();\n\t},\n\tsetValue(node, value) {\n\t\tlet master = webix.$$(node._comp_id);\n\t\tmaster.setValue(value || {});\n\t},\n\trefresh(master, node, config) {\n\t\tmaster.registerFilter(node, config, this);\n\t\tnode._comp_id = master._qb.config.id;\n\t\tlet qb = webix.$$(node._comp_id).getParentView();\n\n\t\tthis.setValue(node, config.value);\n\t\twebix.event(node, \"click\", () => this._filterShow(node, qb));\n\t},\n\trender(master, config) {\n\t\tconst html = \"<div class=\\\"webix_qb_filter\\\"><i class=\\\"webix_qb_filter_icon\\\" aria-hidden=\\\"true\\\"></i></div>\"+(config.label||\"\");\n\t\tif (config.rendered)\n\t\t\treturn html;\n\n\t\tconst locale = webix.i18n.querybuilder;\n\t\t\n\t\tconfig.css = \"webix_ss_filter\";\n\n\t\tlet filter;\n\t\tconfig.prepare = () => { filter = master._qb.getFilterHelper(); };\n\t\tconfig.compare = (v, i, o) => filter(o);\n\t\t\n\t\tlet qb = {\n\t\t\tview: \"querybuilder\",\n\t\t\tfields:config.fields\n\t\t};\n\t\tif (config.queryConfig)\n\t\t\twebix.extend(qb, config.queryConfig);\n\n\t\tlet popupView;\n\t\tlet buttonSave = _buttonCreate(locale.filter, () => {\n\t\t\tif(master._qb) {\n\t\t\t\tlet cfg = master._qb.config;\n\t\t\t\tif (cfg.sorting){\n\t\t\t\t\tconst sortconfig = master._qb.getSortingHelper();\n\t\t\t\t\tif (sortconfig)\n\t\t\t\t\t\tmaster.sort(sortconfig);\n\t\t\t\t}\n\t\t\t\tif (cfg.filtering)\n\t\t\t\t\tmaster.filterByAll();\n\t\t\t\t\n\t\t\t\tpopupView.hide();\n\t\t\t}\n\t\t}, \"form\");\n\t\tlet buttonCancel = _buttonCreate(locale.cancel, () => {\n\t\t\tpopupView.hide();\n\t\t});\n\n\t\tlet body = {margin:5, rows:[qb, {cols:[ buttonSave, buttonCancel, {} ]}]};\n\n\t\tlet popup = {\n\t\t\tview:\"popup\",\n\t\t\tminWidth: 810,\n\t\t\tbody\n\t\t};\n\n\t\tif(config.popupConfig){\n\t\t\twebix.extend(popup, config.popupConfig, true);\n\t\t}\n\n\t\tpopupView = webix.ui(popup);\n\t\tmaster._qb = popupView.getBody().getChildViews()[0];\n\t\tconfig.rendered = true;\n\t\tmaster.attachEvent(\"onDestruct\", () => {\n\t\t\tpopupView.destructor();\n\t\t});\n\n\t\treturn html;\n\t},\n\t_filterShow(node, qb) {\n\t\tqb.show(node.querySelector(\".webix_qb_filter\"));\n\t}\n}, webix.EventSystem);\n"],"names":["locale","or","and","delete_rule","add_rule","add_group","less","less_or_equal","greater","greater_or_equal","between","not_between","begins_with","not_begins_with","contains","not_contains","ends_with","not_ends_with","is_empty","is_not_empty","equal","not_equal","is_null","is_not_null","default_option","cancel","filter","sort","sortby","asc","desc","setLocale","name","lang","webix","i18n","locales","querybuilder","en","protoUI","defaults","padding","margin","borderless","$init","config","value","$view","className","keyoptions","fields","elements","this","_selectConfig","body","data","template","view","type","css","width","inputWidth","label","click","_this","_getParentQuery","_deleteRow","columnMode","rows","push","gravity","cols","options","hidden","minWidth","maxWidth","inputMaxWidth","inputPadding","on","onChange","_this2","_onChange","_inputConfig","field","input","copy","_this3","validate","min","max","moveTitle","title","obj","v","getValue","state","rule","setValue","_silent","key","select","_adjustVisible","_getTopQuery","callEvent","getList","getItem","_updateRuleField","_updateValueField","_fillRules","filters","a","importData","oldrule","show","hide","editor","removeView","addView","queryView","getFilterHelper","fn","ui","form","EventSystem","_init_sorting","$id","suggest","align","labelWidth","_callChangeMethod","id","_getSortingValues","sortBy","els","getSortingElements","sortAs","_setSortingValues","list","clearAll","parse","getSortingHelper","by","values","split","map","as","DataStore","prototype","sorting","obj1","obj2","order","i","length","sorter","b","text","range","str","sql","sqlDateFormat","Date","dateToStr","sqlOperators","op","sep","mod","no_val","toSQL","code","_getSqlString","_placeValues","index","replace","nested","rules","join","glue","toUpperCase","_convertValueToSql","el","format","operator","Array","isArray","start","end","qb","filtering","maxLevel","prepare","toString","c","lastIndexOf","indexOf","any","add","DataCollection","$ready","unshift","_setLayout","levelIndicator","onClick","webix_qb_and","_updateGlue","webix_qb_or","minHeight","webix_qb_add_rule","_addRule","webix_qb_add_group","_addGroup","height","cols_setter","rows_setter","pop","mode","refresh","_addRow","layout","kids","getChildViews","$$","parent","withRow","newView","now","_setRules","forEach","eachLine","cb","result","line","query","reconstruct","focus","childsArr","sub","item","_buttonCreate","datafilter","queryBuilder","extend","getInputNode","node","_comp_id","master","registerFilter","_qb","getParentView","event","_filterShow","render","html","rendered","compare","o","popupView","queryConfig","popup","cfg","sortconfig","filterByAll","popupConfig","getBody","attachEvent","destructor","querySelector"],"mappings":"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"}