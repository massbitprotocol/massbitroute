!function(a){"use strict";function n(){var c={},l=Function;return{publish:function(){var n,i,e,o=arguments,t=c[o[0]];t&&(n=t.length,i=1<o.length?Array.prototype.splice.call(o,1):[],setTimeout(function(){for(e=0;e<n;e+=1)t[e].apply(a,i);t=a=i=null},0))},subscribe:function(n,i){if("string"!=typeof n)throw"invalid or missing channel";if(!(i instanceof l))throw"invalid or missing callback";return c[n]||(c[n]=[]),c[n].push(i),{channel:n,callback:i}},unsubscribe:function(n,i){if(n.channel&&n.callback&&(i=n.callback,n=n.channel),"string"!=typeof n)throw"invalid or missing channel";if(!(i instanceof l))throw"invalid or missing callback";var e,o=c[n],t=o instanceof Array?o.length:0;for(e=0;e<t;e+=1)if(o[e]===i){o.splice(e,1);break}}}}"function"==typeof define&&define.amd?define("pubsub",n):"object"==typeof module&&module.exports?module.exports=n():a.PubSub=n()}(window);
